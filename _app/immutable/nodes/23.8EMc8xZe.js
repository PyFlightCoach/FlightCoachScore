import{u as j}from"../chunks/user.Yoi7WK51.js";import{g as Q}from"../chunks/index.ClTKiXCz.js";import{g as R,i as V}from"../chunks/entry.CDBu3P4u.js";import{b as W}from"../chunks/paths.OcXPU7ra.js";import"../chunks/disclose-version.Bg9kRutz.js";import{e as X,t as y,g as Z,l as m,i as o,r as s,s as n,D as aa,o as ea,j as c}from"../chunks/runtime.CwSbfP9F.js";import{e as C,s as E}from"../chunks/render.BfxXu2ce.js";import{i as ta}from"../chunks/if.ZcvIpmxW.js";import{e as ra,i as sa}from"../chunks/each.BdGor9y4.js";import{a as g,t as x}from"../chunks/template.Dj2c3_OM.js";import{r as w,b as $}from"../chunks/attributes.Dii1APe5.js";import{i as oa,s as ia}from"../chunks/select.CC4XUPX2.js";import{p as L}from"../chunks/event-modifiers.Bfc47y5P.js";import{i as ma}from"../chunks/lifecycle.Dpi4XHcX.js";import{s as na,a as la,b as da}from"../chunks/store.CQHjRMnn.js";import{d as h}from"../chunks/api.CpnLB2Sq.js";import{c as ua,s as ca}from"../chunks/countries.rKgEci2Q.js";function pa(){Q(j)||R(W+"/user/login")}const Ma=Object.freeze(Object.defineProperty({__proto__:null,load:pa},Symbol.toStringTag,{value:"Module"}));var va=x('<div class="row mt-4"><p><mark> </mark></p></div>'),fa=x("<option> </option>"),_a=x('<div class="container" style="max-width:800px"><!> <form class="row mt-4 border rounded" method="POST"><div class="col"><div class="mt-3 mb-3"><label for="first_name" class="form-label">First Name</label> <input type="text" class="form-control" id="first_name" name="first_name" required></div></div> <div class="col"><div class="mt-3 mb-3"><label for="last_name" class="form-label">Last Name</label> <input type="text" class="form-control" id="last_name" name="last_name" required></div></div> <div class="mb-3"><label for="email" class="form-label text-muted">Email address</label> <input type="email" class="form-control text-muted bg-light" id="email" name="email" readonly=""></div> <div class="mb-3"><label for="country" class="form-label">Country</label> <select class="form-select" id="country" name="country" required></select></div> <div class="mb-3"><button type="submit" class="btn btn-primary">Update</button></div></form> <form class="row mt-4 border rounded" method="POST"><div class="mt-3 mb-3"><label for="password" class="form-label">Password</label> <input type="password" class="form-control" id="password" name="password" minlength="10" required aria-describedby="passwordhelp"> <div id="passwordhelp" class="form-text">Minimum of ten characters</div></div> <div class="mb-3"><button type="submit" class="btn btn-primary">Update Password</button></div></form></div>');function Na(B,G){X(G,!1);const H=na(),t=()=>la(j,"$user",H);let l=ea(void 0);async function I(r){try{const a=new FormData(r.currentTarget),e=ca(a.get("country")),i={first_name:a.get("first_name"),last_name:a.get("last_name"),email:a.get("email"),country:e[0],country_emoji:e[1]};c(l,void 0);const d=await h.patch("users/me",i);da(j,await h.get("users/me")),c(l,"Your profile has been updated."),await V()}catch{c(l,"Oops...something has gone wrong. Please try again later.")}}async function J(r){try{const e={password:new FormData(r.currentTarget).get("password")};c(l,void 0);const i=await h.patch("users/me",e);c(l,"Your password has been updated.")}catch{c(l,"Oops...something has gone wrong. Please try again later.")}}ma();var v=_a(),P=o(v);ta(P,()=>m(l),r=>{var a=va(),e=o(a),i=o(e),d=o(i);s(i),s(e),s(a),y(()=>E(d,m(l))),g(r,a)});var p=n(P,2),f=o(p),S=o(f),O=n(o(S),2);w(O),s(S),s(f);var _=n(f,2),T=o(_),k=n(o(T),2);w(k),s(T),s(_);var b=n(_,2),q=n(o(b),2);w(q),s(b);var D=n(b,2),u=n(o(D),2);oa(u,()=>{var r,a;return`${((r=t())==null?void 0:r.country)??""} ${((a=t())==null?void 0:a.country_emoji)??""}`});var U;ra(u,5,()=>ua,sa,(r,a)=>{var e=fa(),i={},d=o(e);s(e),y(()=>{i!==(i=`${m(a).name??""} ${m(a).emoji??""}`)&&(e.value=(e.__value=`${m(a).name??""} ${m(a).emoji??""}`)==null?"":`${m(a).name??""} ${m(a).emoji??""}`),E(d,`${m(a).name??""} ${m(a).emoji??""}`)}),g(r,e)}),s(u),s(D),aa(2),s(p);var K=n(p,2);s(v),y(()=>{var r,a,e,i,d,F,M,N,Y,z,A;$(O,(r=t())==null?void 0:r.first_name),$(k,(a=t())==null?void 0:a.last_name),$(q,(e=t())==null?void 0:e.email),U!==(U=`${((i=t())==null?void 0:i.country)??""} ${((d=t())==null?void 0:d.country_emoji)??""}`)&&(u.value=(u.__value=`${((F=t())==null?void 0:F.country)??""} ${((M=t())==null?void 0:M.country_emoji)??""}`)==null?"":`${((N=t())==null?void 0:N.country)??""} ${((Y=t())==null?void 0:Y.country_emoji)??""}`,ia(u,`${((z=t())==null?void 0:z.country)??""} ${((A=t())==null?void 0:A.country_emoji)??""}`))}),C("submit",p,L(I)),C("submit",K,L(J)),g(B,v),Z()}export{Na as component,Ma as universal};
