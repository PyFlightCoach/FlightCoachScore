import"../chunks/disclose-version.Bg9kRutz.js";import{e as h,g as y,l as p,i as t,r as e,t as _,s as k,o as x,j as d}from"../chunks/runtime.CwSbfP9F.js";import{e as S,s as D}from"../chunks/render.BfxXu2ce.js";import{i as q}from"../chunks/if.ZcvIpmxW.js";import{a as n,t as f}from"../chunks/template.Dj2c3_OM.js";import{p as F}from"../chunks/event-modifiers.Bfc47y5P.js";import{i as P}from"../chunks/lifecycle.Dpi4XHcX.js";import{s as j,b as O}from"../chunks/store.CQHjRMnn.js";import{f as T,d as c}from"../chunks/api.CpnLB2Sq.js";import{b as E}from"../chunks/paths.OcXPU7ra.js";import{g as I}from"../chunks/entry.CDBu3P4u.js";import{u as $}from"../chunks/user.Yoi7WK51.js";var z=f('<div class="row mt-4"><p><mark> </mark></p></div>'),A=f('<div class="container" style="max-width: 600px"><!> <form class="row mt-4" method="POST"><div class="mb-3"><label for="email" class="form-label">Email address</label> <input type="email" class="form-control" id="email" name="email" required></div> <div class="mb-3"><label for="password" class="form-label">Password</label> <input type="password" class="form-control" id="password" name="password" required></div> <div class="row mb-3"><div class="col"><button type="submit" class="btn btn-primary">Sign In</button></div> <div class="col"><a href="/password-request">Forgotten your password?</a></div></div></form></div>');function V(v,u){h(u,!1),j();let s=x();async function b(i){try{const a=new FormData(i.currentTarget),r=T({username:a.get("email"),password:a.get("password")});try{await c.post("auth/jwt/login",r)}catch{d(s,"Sign in has failed; please check your credentials.");return}O($,await c.get("users/me")),I(`${E}/`)}catch{d(s,"Oops...something has gone wrong. Please try again later.")}}P();var o=A(),m=t(o);q(m,()=>p(s),i=>{var a=z(),r=t(a),l=t(r),w=t(l);e(l),e(r),e(a),_(()=>D(w,p(s))),n(i,a)});var g=k(m,2);e(o),S("submit",g,F(b)),n(v,o),y()}export{V as component};
