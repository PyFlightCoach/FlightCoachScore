import{g as Se}from"../chunks/index.ClTKiXCz.js";import{a as Ne}from"../chunks/analysis.Dc8TT14m.js";import{s as Ie,J as L,K as ke,a as Fe}from"../chunks/analysis.DdsEFb_0.js";import"../chunks/disclose-version.Bg9kRutz.js";import{e as Q,m as g,n as U,l as e,g as X,j as d,v as P,ad as O,o as m,i as o,s as x,r as l,t as I,f as te}from"../chunks/runtime.CwSbfP9F.js";import{e as ne,s as F}from"../chunks/render.BfxXu2ce.js";import{i as H}from"../chunks/if.ZcvIpmxW.js";import{a as q,t as G,c as je}from"../chunks/template.Dj2c3_OM.js";import{i as Y}from"../chunks/lifecycle.Dpi4XHcX.js";import{s as Ge,c as Te,a as we}from"../chunks/store.CQHjRMnn.js";import{P as Ce}from"../chunks/PlotSec.j1wUDMHL.js";import{P as Ve}from"../chunks/PlotDTW.SX7vp4oz.js";import{p as M}from"../chunks/props.DEpAHq7J.js";import{P as me}from"../chunks/Plot.C7q7TIXp.js";import{e as de,i as ce}from"../chunks/each.BdGor9y4.js";import{t as ve}from"../chunks/class.CiUBhoad.js";import{s as Me}from"../chunks/style.B21HP8CR.js";import{r as Je,a as Pe,c as Ke}from"../chunks/styling.P309WQS-.js";async function We(){await Ne(Se(Ie))}const bt=Object.freeze(Object.defineProperty({__proto__:null,load:We},Symbol.toStringTag,{value:"Module"}));function Ae(z,u){Q(u,!1);const c=m(),v=m();let a=M(u,"result",8),p=M(u,"downgrade",8);g(()=>P(a()),()=>{var n;d(c,(n=a())==null?void 0:n.scale())}),g(()=>(P(a()),L),()=>{d(v,!a()||a().measurement.unit.includes("rad")?L(0,120,20):L(0,Math.max(Math.max(...a().errors),-Math.min(...a().errors))*2,20))}),U(),Y();var t=O(()=>{var n,_,s,k,j;return[{type:"scatter",x:a()?e(v):void 0,y:p()?e(v).map(f=>Math.min(p().criteria.lookup.factor*Math.pow(f/e(c),p().criteria.lookup.exponent),p().criteria.lookup.limit)):void 0,line:{color:"black"},showlegend:!1},{type:"scatter",x:(n=a())==null?void 0:n.errors.map(f=>Math.abs(f*e(c))),y:(_=a())==null?void 0:_.dgs,text:(s=a())==null?void 0:s.dgs.map(f=>f.toFixed(3)),mode:"markers+text",showlegend:!1,textposition:"bottom center",marker:{size:12,color:(k=a())==null?void 0:k.dgs,colorscale:"Reds"},hovertext:(j=a())==null?void 0:j.info()}]}),i=O(()=>{var n;return{yaxis:{title:"downgrade"},xaxis:{title:((n=p())==null?void 0:n.criteria.kind)+" error"},autosize:!0,margin:{l:40,r:0,t:0,b:40}}});me(z,{get data(){return e(t)},get layout(){return e(i)},fillParent:!0}),X()}function Be(z,u){Q(u,!1);const c=m(),v=m(),a=m();let p=M(u,"result",8),t=M(u,"downgrade",8),i=M(u,"vis",8);g(()=>P(t()),()=>{d(c,t()?(t().criteria.lookup.limit/t().criteria.lookup.factor)**(1/t().criteria.lookup.exponent):void 0)}),g(()=>P(p()),()=>{var _;d(v,(_=p())==null?void 0:_.scale())}),g(()=>(e(c),e(v)),()=>{d(a,e(c)?L(0,e(v)*e(c)*1.5,50):void 0)}),U(),Y();var n=O(()=>[{type:"scatter",x:e(a),y:e(a)?e(a).map(_=>{const s=Math.abs(_/(e(c)*e(v)));return e(v)*e(c)*(s>=1?s:s**(2-i()))}):void 0,line:{color:"black"},showlegend:!1}]);me(z,{get data(){return e(n)},layout:{yaxis:{title:"visible error"},xaxis:{title:"real error"},autosize:!0,margin:{l:40,r:0,t:0,b:40}},fillParent:!0}),X()}function He(z,u){Q(u,!1);const c=m(),v=m(),a=m(),p=m();let t=M(u,"result",8),i=M(u,"activeIndex",12,null);g(()=>P(i()),()=>{d(c,i()==null?0:i())}),g(()=>P(t()),()=>{d(v,t().scale())}),g(()=>P(t()),()=>{d(a,t().measurement.unit.replace("rad","deg"))}),g(()=>P(t()),()=>{d(p,L(0,t().measurement.value.length-1,t().measurement.value.length))}),U(),Y();var n=O(()=>[{type:"scatter",x:e(p),y:t().measurement.value.map(s=>s!=null?s*e(v):null),name:"measurement",line:{color:"black",width:1},yaxis:"y"},{type:"scatter",x:e(p),y:t().measurement.visibility,name:"visibility",line:{color:"blue",width:1,dash:"dot"},yaxis:"y2"},{type:"scatter",x:t().sample_keys,y:t().measurement.value.map((s,k)=>s*t().measurement.visibility[k]*e(v)),name:"raw sample",line:{width:1,color:"grey"}},{type:"scatter",x:t().sample_keys,y:t().sample.map(s=>s!=null?s*e(v):null),name:"smooth sample",line:{width:3,color:"green"}},{type:"scatter",x:t().keys.map(s=>t().sample_keys[s]),y:t().keys.map(s=>t().sample[s]*e(v)),text:t().dgs.map(s=>s.toFixed(3)),hovertext:t().info(),name:"downgrade",mode:"markers+text",marker:{size:12,color:t().dgs,colorscale:"Reds"},textposition:"bottom center"}]),_=O(()=>({yaxis:{title:"measurement ("+e(a)+")"},yaxis2:{title:"visibility",overlaying:"y",side:"right",range:[0,1]},xaxis:{visible:!1,range:[0,t().measurement.value.length]},hovermode:"x unified",legend:{orientation:"h",x:.2,y:0},autosize:!0,margin:{l:60,r:70,t:0,b:0},shapes:[{type:"line",x0:e(c),y0:0,x1:e(c),y1:1,yref:"paper",line:{color:"black",width:1}}],modebar:{orientation:"v"}}));me(z,{get data(){return e(n)},get layout(){return e(_)},fillParent:!0,$$events:{click:s=>{i(s.detail.points[0].x)}}}),X()}var Le=G('<th class="rotate svelte-1upqdt9"><div class="svelte-1upqdt9"><span> </span></div></th>'),Qe=G('<td role="button" class="svelte-1upqdt9"> </td>'),Ue=G('<td class="text-center svelte-1upqdt9">-</td>'),Xe=G('<tr><td role="button" class="svelte-1upqdt9"> </td><!></tr>'),Ye=G('<div class="table-responsive"><table class="table table-sm table-hover table-bordered  border-primary"><thead><tr><th role="button" class="text-center svelte-1upqdt9">Clear Selection</th><!></tr></thead><tbody></tbody></table></div>');function Ze(z,u){Q(u,!1);const c=m(),v=m(),a=m(),p=m();let t=M(u,"data",8),i=M(u,"activeRow",12,null),n=M(u,"activeCol",12,null),_=M(u,"colorCols",8,null),s=M(u,"colours",8,Je);const k=(b,r)=>{(b==null||r==null||t()[b][r]!=null)&&(i(b),n(r))},j=(b,r)=>e(a).indexOf(r)>=0?Ke(t()[b][r],e(p),s()):"white";g(()=>P(t()),()=>{d(c,Object.keys(t()))}),g(()=>(P(t()),e(c)),()=>{d(v,Object.keys(t()[e(c)[0]]))}),g(()=>(P(_()),e(v)),()=>{d(a,_()==null?e(v):_())}),g(()=>(P(t()),e(a)),()=>{d(p,ke(Object.values(t()).map(b=>ke(e(a).map(r=>b[r])))))}),U(),Y();var f=Ye(),D=o(f),w=o(D),J=o(w),V=o(J),ae=x(V);de(ae,1,()=>e(v),ce,(b,r)=>{var h=Le(),y=o(h),C=o(y),E=o(C);I(()=>F(E,e(r).replace("_"," "))),l(C),l(y),l(h),I(()=>ve(h,"active",e(r)==n())),q(b,h)}),l(J),l(w);var K=x(w);de(K,5,()=>e(c),ce,(b,r)=>{var h=Xe(),y=o(h);const C=O(()=>Pe[e(c).indexOf(e(r))%Pe.length]);I(()=>Me(y,"background-color",e(C)));var E=o(y);l(y);var W=x(y);de(W,1,()=>e(v),ce,(A,S)=>{var Z=je(),$=te(Z);H($,()=>t()[e(r)][e(S)]!=null,T=>{var R=Qe();const re=O(()=>j(e(r),e(S)));I(()=>Me(R,"background-color",e(re)));var ee=o(R);I(()=>F(ee,t()[e(r)][e(S)].toFixed(2))),l(R),I(()=>ve(R,"active",e(r)==i()&&e(S)==n())),ne("click",R,ue=>{k(e(r),e(S))}),q(T,R)},T=>{var R=Ue();q(T,R)}),q(A,Z)}),l(h),I(()=>{ve(y,"active",e(r)==i()),F(E,e(r))}),ne("click",y,A=>{k(e(r),null)}),q(b,h)}),l(K),l(D),l(f),ne("click",V,()=>k(null,null)),q(z,f),X()}var $e=G("<table><tbody><tr><td>Measurement:</td><td> </td></tr><tr><td>Element:</td><td> </td></tr><tr><td>Sample:</td><td> </td></tr><tr><td>Smoothing:</td><td> </td></tr><tr><td>Criteria:</td><td> </td></tr></tbody></table>"),et=G('<div class="col-12 flex-grow-1 border d-flex flex-row border"><div class="col-6 border"><!></div> <div class="col-6 d-flex flex-column border"><div class="col-12 border"><!></div> <div class="col-12 flex-grow-1 d-flex flex-row border"><div class="col-6 border"><!></div> <div class="col-6 border"><!></div></div></div></div> <div class="col-12 flex-grow-1 border"><!></div>',1),tt=G('<div class="col-4 pt-3 border"><!></div> <div class="col-8 d-flex flex-column border"><!></div>',1);function ht(z,u){Q(u,!1);const c=Ge(),v=()=>we(Ie,"$selManID",c),a=()=>we(e(p),"$man",c),p=m(),t=m(),i=m(),n=m(),_=m(),s=m();let k=m(),j=m(),f=m(),D=m(),w=m(0);g(()=>v(),()=>{Te(d(p,Fe[v()]),"$man",c)}),g(()=>a(),()=>{d(t,a().scores.intra.summaries())}),g(()=>a(),()=>{d(k,a().flown.split())}),g(()=>a(),()=>{d(j,a().template.split())}),g(()=>(a(),e(D)),()=>{d(i,a().mdef.getEd(e(D)))}),g(()=>(e(i),e(f)),()=>{var r;d(n,(r=e(i))==null?void 0:r.getDG(e(f)))}),g(()=>(a(),e(i)),()=>{var r;d(_,a().manoeuvre.getEl((r=e(i))==null?void 0:r.name))}),g(()=>(e(D),e(f),a()),()=>{var r;d(s,e(D)&&e(f)?(r=a())==null?void 0:r.scores.intra.data[e(D)].data[e(f)]:void 0)}),U(),Y();var J=tt(),V=te(J),ae=o(V);Ze(ae,{get data(){return e(t)},get activeRow(){return e(D)},set activeRow(r){d(D,r)},get activeCol(){return e(f)},set activeCol(r){d(f,r)},$$legacy:!0}),l(V);var K=x(V,2),b=o(K);H(b,()=>!e(f),r=>{var h=je(),y=te(h);H(y,()=>!e(i),C=>{Ve(C,{get sts(){return e(k)},get activeEl(){return e(i)},set activeEl(E){d(i,E)},sp:4,$$legacy:!0})},C=>{var E=O(()=>e(k)[e(i).name].move(e(j)[e(i).name].data[0].pos));Ce(C,{get flst(){return e(E)},get tpst(){return e(j)[e(i).name]},get i(){return e(w)},set i(W){d(w,W)},controls:["play","scale","speed","projection","modelClick"],fixRange:!0,scale:3,$$legacy:!0})}),q(r,h)},r=>{var h=et(),y=te(h),C=o(y),E=o(C),W=O(()=>e(k)[e(i).name].move(e(j)[e(i).name].data[0].pos));Ce(E,{get flst(){return e(W)},get tpst(){return e(j)[e(i).name]},get i(){return e(w)},set i(N){d(w,N)},controls:["play","scale","speed","projection","modelClick"],fixRange:!0,scale:3,$$legacy:!0}),l(C);var A=x(C,2),S=o(A),Z=o(S);H(Z,()=>e(f)&&e(n)&&e(_)&&e(s),N=>{var B=$e(),fe=o(B),se=o(fe),pe=x(o(se)),Re=o(pe);l(pe),l(se);var le=x(se),_e=x(o(le)),qe=o(_e);I(()=>F(qe,e(_).describe())),l(_e),l(le);var oe=x(le),xe=x(o(oe)),Oe=o(xe);I(()=>F(Oe,e(n).describe_selectors())),l(xe),l(oe);var ie=x(oe),ye=x(o(ie)),ze=o(ye);l(ye),l(ie);var be=x(ie),he=x(o(be)),Ee=o(he);I(()=>F(Ee,e(n).criteria_description(e(s)))),l(he),l(be),l(fe),l(B),I(()=>{F(Re,e(n).measure),F(ze,e(n).smoothers.length>0?e(n).smoothers:"None")}),q(N,B)}),l(S);var $=x(S,2),T=o($),R=o(T),re=O(()=>{var N;return e(w)?(N=e(s))==null?void 0:N.measurement.visibility[e(w)]:void 0});Be(R,{get result(){return e(s)},get downgrade(){return e(n)},get vis(){return e(re)}}),l(T);var ee=x(T,2),ue=o(ee);Ae(ue,{get result(){return e(s)},get downgrade(){return e(n)}}),l(ee),l($),l(A),l(y);var ge=x(y,2),De=o(ge);H(De,()=>e(s)&&e(n)&&e(f),N=>{He(N,{get result(){return e(s)},get activeIndex(){return e(w)},set activeIndex(B){d(w,B)},$$legacy:!0})}),l(ge),q(r,h)}),l(K),q(z,J),X()}export{ht as component,bt as universal};
